(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{154:function(t,e,a){Promise.resolve().then(a.bind(a,5178))},5178:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return c}});var n=a(7437),r=a(2265),i=a(8131),o=a(5978),s=a(62),l=a(5475);function c(){let t=(0,l.useRouter)(),[e,a]=(0,r.useState)(null),[c,u]=(0,r.useState)(""),[d,p]=(0,r.useState)(0),[g,m]=(0,r.useState)(""),[f,h]=(0,r.useState)(!1),x=t=>{let e=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return"".concat(e).concat(a).concat(n)},b=async()=>{if(!e)return alert("파일을 선택하세요");if(!c)return alert("제목을 입력하세요");if(!d)return alert("참석자 수를 입력하세요");if(!g)return alert("참석자 이름을 입력하세요");try{h(!0);let t=x(new Date),n=c.replace(/[^a-zA-Z0-9가-힣]/g,"_"),r="".concat(t,"_").concat(n,"_").concat(d,"명"),l=e.name.split(".").pop(),f="".concat(r,".").concat(l);await (0,o.pl)((0,o.JU)(i.db,"meetings",r),{title:c,participants:parseInt(d),participantName:g.split(",").map(t=>t.trim()),createAt:(0,o.Bt)()});let b=(0,s.iH)(i.t,"audio/".concat(f));await (0,s.KV)(b,e);let y=await (0,s.Jt)(b),j=await fetch("/api/process-audio",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({audioUrl:y})}),v=await j.json();if(!j.ok)throw Error(v.error||"음성 처리 중 오류가 발생했습니다");let k=v.transcript.map(t=>({speaker:t.speaker,text:t.text}));await (0,o.r7)((0,o.JU)(i.db,"meetings",r),{audioUrl:y,audioFileName:f,textinfo:k}),alert("회의록 저장 완료!"),a(null),u(""),p(0),m("")}catch(t){console.error("Error saving meeting:",t),alert(t.message||"저장 중 오류가 발생했습니다.")}finally{h(!1)}};return(0,n.jsxs)("main",{style:{padding:32},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[(0,n.jsx)("h1",{children:"\uD83C\uDF99️ 회의록 생성"}),(0,n.jsx)("button",{onClick:()=>t.push("/meetings"),style:{padding:"10px 20px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1rem"},children:"회의록 목록 보기"})]}),(0,n.jsxs)("div",{style:{marginBottom:20},children:[(0,n.jsxs)("div",{style:{marginBottom:10},children:[(0,n.jsx)("label",{children:"제목:"}),(0,n.jsx)("input",{type:"text",value:c,onChange:t=>u(t.target.value),style:{marginLeft:10}})]}),(0,n.jsxs)("div",{style:{marginBottom:10},children:[(0,n.jsx)("label",{children:"참석자 수:"}),(0,n.jsx)("input",{type:"number",value:d,onChange:t=>p(t.target.value),style:{marginLeft:10}})]}),(0,n.jsxs)("div",{style:{marginBottom:10},children:[(0,n.jsx)("label",{children:"참석자 이름 (쉼표로 구분):"}),(0,n.jsx)("input",{type:"text",value:g,onChange:t=>m(t.target.value),style:{marginLeft:10}})]}),(0,n.jsxs)("div",{style:{marginBottom:10},children:[(0,n.jsx)("label",{children:"음성 파일:"}),(0,n.jsx)("input",{type:"file",accept:"audio/*",onChange:t=>a(t.target.files[0]),style:{marginLeft:10}})]}),(0,n.jsx)("button",{onClick:b,disabled:f,style:{padding:"10px 20px",backgroundColor:f?"#ccc":"#4a90e2",color:"white",border:"none",borderRadius:"4px",cursor:f?"not-allowed":"pointer"},children:f?"처리 중...":"회의록 저장"})]})]})}},8131:function(t,e,a){"use strict";a.d(e,{db:function(){return s},t:function(){return l}});var n=a(738),r=a(5978),i=a(62);let o=(0,n.ZF)({apiKey:"AIzaSyDH5W4RtjTzBkRa0wlPW9isIxv3jlAHRB8",authDomain:"talktotext-37f54.firebaseapp.com",projectId:"talktotext-37f54",storageBucket:"talktotext-37f54.firebasestorage.app",messagingSenderId:"682893808651",appId:"1:682893808651:web:d6ba5b055ef8308506230e"}),s=(0,r.ad)(o),l=(0,i.cF)(o)}},function(t){t.O(0,[358,763,971,117,744],function(){return t(t.s=154)}),_N_E=t.O()}]);